// Add timeout for browser launch
            browserWS: undefined,
            puppeteerOptions: {
              headless: 'new', // Use new headless mode
              executablePath: '/nix/store/zi4f80l169xlmivz8vja8wlphq74qqk0-chromium-125.0.6422.141/bin/chromium-browser',
              args: [
                // Essential security and stability flags
                '--no-sandbox',
                '--disable-setuid-sandbox',
                '--disable-dev-shm-usage',
                '--disable-gpu',
                '--single-process',
                '--no-zygote',
                
                // Memory and performance optimization for Replit
                '--memory-pressure-off',
                '--max_old_space_size=4096',
                '--disable-background-timer-throttling',
                '--disable-backgrounding-occluded-windows',
                '--disable-renderer-backgrounding',
                '--disable-ipc-flooding-protection',
                
                // Profile and process management
                '--disable-web-security',
                '--force-new-browser-profile',
                '--disable-profile-directory-check',
                '--disable-process-singleton-dialog',
                '--no-first-run',
                
                // Reduce browser overhead
                '--disable-component-extensions-with-background-pages',
                '--disable-sync',
                '--disable-translate',
                '--disable-default-apps',
                '--disable-extensions',
                '--disable-features=VizDisplayCompositor,AudioServiceOutOfProcess',
                
                // WhatsApp Web specific optimizations
                '--disable-blink-features=AutomationControlled',
                '--exclude-switches=enable-automation',
                '--disable-client-side-phishing-detection',
                '--disable-component-update',
                '--disable-domain-reliability',
                '--disable-features=TranslateUI',
                '--disable-background-networking',
                '--disable-breakpad'
              ],
              timeout: 180000, // 3 minutes for stable initialization
              defaultViewport: { width: 1366, height: 768 }, // Standard viewport
              ignoreDefaultArgs: ['--enable-automation'], // Hide automation detection
            },